<!DOCTYPE html>
<html>
	<head>
		<title>Demo procrastination</title>
		<style type="text/css" media="screen">
			html, body{
				height: 100%;
				width: 100%;
			}
		</style>
		<script src="lib/zepto.js" type="text/javascript" charset="utf-8"></script>
		<!-- <script src="lib/streamer.js" type="text/javascript" charset="utf-8"></script> -->
		<script src="procrastination.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript" charset="utf-8">
			$(function(){
				// s = Procrastination($('p'))
				//							 .each(function(e){ $(e).append(" World!") })
				//							 .each(function(e){ $(e).append(" " + new Date()) })
				//							 .attr("class")
				//							 .each(function(e){console.log(e)})
				/*
				setInterval(function(){
					$(document.body).append('<p class="blah">Hello</p>')
				}, 2000)
				*/

				function mousemove(next){ $(document.body).mousemove(next, false) }
				function key(next){ $(document.body).keydown(next, false) }
				function click(next){ $(document.body).click(next, false) }
				
				/*
				new Reactive()
					.map(function (evt) {
						return evt
					})
					.foreach(function(e){
						console.log(e)
					})
					.on(click)
					.foreach(function(v){
						console.log("PAF: %o", v)
					})
					.on(key)
				*/
				/*
				var logger = new Reactive().foreach(function(e){ console.log(e) }),
					r1 = logger.on(key),
					r2 = logger.on(click),
					both = r1.zip(r2).flatmap(logger)
				*/
				
				new Reactive()
					.flatmap(function(v){
						return new Reactive()
							.map(function(evt){ return "lol " + evt })
					})
					.map(function(e){
						return '--> ' + e
					})
					.foreach(function(v){ console.log(v)	})
					.on(click)
				
				// var clicks = Reactive.on(click)
				//	.map(function(evt){ return "click" })

				// var all = moves.append(clicks)
				// 				all.map(function(e){
				// 					console.log(e)
				// 				})

			})
		</script>
	</head>
	<body>
		<p class="demo">
			Hello
		</p>
	</body>
</html>
